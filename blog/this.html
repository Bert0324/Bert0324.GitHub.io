<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Bert's Blog</title><meta name="keywords" content="blog,javascript,typescript,code,frontend"><meta name="description" content="bert huang's blog"><link rel="icon" href="/assets/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg==" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/a11y-light.min.css" integrity="sha512-PW96n2amVglidqEDLPUdjJ0zByhT20poSqWJYZRutR6CP2QH58k96WmorqNnC4QXnosNeqMJM8FR/93isIifDQ==" crossorigin="anonymous"><link rel="stylesheet" href="/blog/style.css"></head><body><div><div class="container"><div class="side-bar"><img class="avatar" src="/assets/avatar.jpeg"><h1>Bert Huang</h1><p>一位兴趣广泛的前端程序员</p><nav><ul><li><a href="/blog/index.html">Index</a></li><li><a href="/blog/code.html">Code</a></li><li><a href="/blog/leetcode.html">LeetCode</a></li><li><a href="/blog/essay.html">Essay</a></li><li><a href="/blog/about.html">About</a></li></ul></nav><div id="social"><a href="https://github.com/Bert0324"><img class="social-avatar" src="https://github.githubassets.com/favicons/favicon.png"></a><a href="https://www.facebook.com/people/Yuchen-Huang/100005315205237"><img class="social-avatar" src="/assets/facebook.png"></a><a href="https://twitter.com/BertHuang5"><img class="social-avatar" src="/assets/twitter.png"></a></div><div class="views-count"><p id="busuanzi_container_site_uv" style="display:inline">total viewers: <span id="busuanzi_value_site_uv"></span></p></div></div><div class="post-content"><div class="search-field"><input class="search-input" placeholder="search"><div style="position:absolute"><div class="search-dropdown"><div class="dropdown-container"></div></div></div><button class="icon-font search-button"></button></div><div class="post-container"><div id="particles-js" style="position:fixed;height:100vh;width:100vw;z-index:-99"></div><div class="post-article"><article class="markdown-body"><div><div id="toc"><div class="last-edit"><p>Last Commit: 2021-09-26 21:10:16</p><p id="busuanzi_container_page_pv">views: <span id="busuanzi_value_page_pv"></span></p></div><div id="toc-body"><p><strong>Table of Content</strong></p><ul><li><a href="#runtime%20binding">runtime binding</a></li><li><a href="#apply%2C%20call%20and%20bind">apply, call and bind</a></li><li><a href="#new%20a%20class%20in%20js">new a class in js</a></li><li><a href="#precedence%20of%20this%20keyword%20bindings">precedence of this keyword bindings</a></li><li><a href="#strict%20mode">strict mode</a></li><li><a href="#reference">reference</a></li></ul></div></div><div><h1 id="this"><code>this</code></h1><p>In most cases, the value of <code>this</code> is determined by how a function is called (runtime binding). It can&#39;t be set by assignment during execution, and it may be different each time the function is called.</p><h2 id="runtime%20binding">Runtime binding</h2><p>There is a demo:</p><pre><code class="language-ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bike</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name);
}

<span class="hljs-keyword">var</span> name = <span class="hljs-string">&quot;Ninja&quot;</span>;
<span class="hljs-keyword">var</span> obj1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Pulsar&quot;</span>, <span class="hljs-attr">bike</span>: bike };
<span class="hljs-keyword">var</span> obj2 = { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Gixxer&quot;</span>, <span class="hljs-attr">bike</span>: bike };

bike();           <span class="hljs-comment">// &quot;Ninja&quot;</span>
obj1.bike();      <span class="hljs-comment">// &quot;Pulsar&quot;</span>
obj2.bike();      <span class="hljs-comment">// &quot;Gixxer&quot;</span>
</code></pre><h2 id="apply%2C%20call%20and%20bind"><code>apply</code>, <code>call</code> and <code>bind</code></h2><p>These three functions are able to change <code>this</code> value in a function when it calls them.</p><ol><li><code>bind</code> will change <code>this</code> but not run the function. A function can only be bind once.</li><li><code>call</code> will change <code>this</code> and run it.</li><li><code>apply</code> will change <code>this</code>, and params will be passed as an array.</li></ol><pre><code class="language-ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>, a, b);
}

<span class="hljs-keyword">const</span> bindFn = fn.bind({});
fn.call({}, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
fn.apply({}, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]);
</code></pre><h2 id="new%20a%20class%20in%20js"><code>new</code> a <code>Class</code> in JS</h2><p>The new keyword in front of any function turns the function call into constructor call and below things occurred when new keyword put in front of function:</p><ol><li>A brand new empty object gets created</li><li>new empty object gets linked to prototype property of that function</li><li>same new empty object gets bound as this keyword for execution context of that function call</li><li>if that function does not return anything then it implicit returns this object.</li></ol><pre><code class="language-ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bike</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> name = <span class="hljs-string">&quot;Ninja&quot;</span>;
  <span class="hljs-built_in">this</span>.maker = <span class="hljs-string">&quot;Kawasaki&quot;</span>;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name + <span class="hljs-string">&quot; &quot;</span> + maker);  <span class="hljs-comment">// undefined Bajaj</span>
}

<span class="hljs-keyword">var</span> name = <span class="hljs-string">&quot;Pulsar&quot;</span>;
<span class="hljs-keyword">var</span> maker = <span class="hljs-string">&quot;Bajaj&quot;</span>;

obj = <span class="hljs-keyword">new</span> bike();
<span class="hljs-built_in">console</span>.log(obj.maker);                  <span class="hljs-comment">// &quot;Kawasaki&quot;</span>
</code></pre><h2 id="precedence%20of%20this%20keyword%20bindings">Precedence of <code>this</code> keyword bindings</h2><ol><li>First it checks whether the function is called with new keyword.</li><li>Second it checks whether the function is called with call() or apply() method means explicit binding.</li><li>Third it checks if the function called via context object (implicit binding).</li><li>Default global object (undefined in case of strict mode).</li></ol><h2 id="strict%20mode">Strict mode</h2><p>under <code>use strict;</code>, global <code>this</code> won&#39;t point to <code>window</code>, instead, it points to <code>undefined</code>.</p><pre><code class="language-ts">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">    &#x27;use strict&#x27;</span>;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">// undefined</span>
})();

(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">// window</span>
})();
</code></pre><h2 id="reference">Reference</h2><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this</a></li><li><a href="https://codeburst.io/all-about-this-and-new-keywords-in-javascript-38039f71780c">https://codeburst.io/all-about-this-and-new-keywords-in-javascript-38039f71780c</a></li></ul></div></div></article></div></div><div id="reminder" style="display:none">Facebook Comments Service is unavailable</div></div></div></div></body><script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script><script async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v9.0" nonce="BSCiWiHI"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0SEZ9KRGY7"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script async src="https://cdnjs.cloudflare.com/ajax/libs/FlexSearch/0.6.22/flexsearch.min.js"></script><script src="/blog/index.js"></script></html>