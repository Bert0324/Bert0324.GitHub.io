<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Bert's Blog</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg==" crossorigin="anonymous" />
	<link rel="stylesheet/less" type="text/css" href="/blog/style.less" />
	<script src="//cdn.jsdelivr.net/npm/less@3.13" ></script>
	<style>
		.markdown-body {
			box-sizing: border-box;
			min-width: 200px;
			max-width: 980px;
			margin: 0 auto;
			padding: 45px;
		}
	
		@media (max-width: 767px) {
			.markdown-body {
				padding: 15px;
			}
		}
	</style>
</head>

<body>
	<div><div><article class="markdown-body"><h1 id="throttle-and-debounce">Throttle and Debounce</h1>
<h2 id="throttle">Throttle</h2>
<p>Thinking about a scenario, there is a button which will send a http request when clicked by a user.</p>
<p>Obviously, if an impatient user clicked it for multiple times at short time, the page would send many unnecessary
requests to the backend.</p>
<p>One solution is to disable the button until the request got its response, one solution is to throttle the button, which means at certain time, it will send only one request.</p>
<p>There is a implementation.</p>
<pre><code class="language-JavaScript">const throttle = (fn, delay)=&gt;{
    let avaliable = true;                //closure to save the timeout task handler
    return (...args) =&gt; {
        if (!avaliable) return;
        avaliable = false;
        setTimeout(()=&gt;{
            fn.apply(this, args);
            avaliable = true;
        }, delay);
    }
};

document.getElementsByTagName(&#39;button&#39;)[0].addEventListener(&#39;click&#39;, throttle((e)=&gt;{
    console.log(e);
}, 2000));
</code></pre>
<h2 id="debounce">Debounce</h2>
<p>Unlike throttle, debounce is to cancel last uncompleted task.</p>
<p>If there is a page which will auto save something after the user make an update, we can debounce the save until
no more updates for a set period of time. That way we don&#39;t spam the save function.</p>
<pre><code class="language-JavaScript">const debounce = (fn, delay)=&gt;{
    let task = null;
    return (...args)=&gt;{
        clearTimeout(task);
        task = setTimeout(()=&gt;{
            fn.apply(this, args);
        }, delay);
    }
};

document.getElementsByTagName(&#39;button&#39;)[0].addEventListener(&#39;click&#39;, debounce((e)=&gt;{
    console.log(e);
}, 2000));
</code></pre>
</article></div></div>
</body>

</html>