<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Bert's Blog</title>
	<meta name="keywords" content="blog,javascript,typescript,code,frontend">
	<meta name="description" content="bert huang's blog">
	<link rel="icon" href="/assets/favicon.ico"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg==" crossorigin="anonymous" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/a11y-light.min.css" integrity="sha512-PW96n2amVglidqEDLPUdjJ0zByhT20poSqWJYZRutR6CP2QH58k96WmorqNnC4QXnosNeqMJM8FR/93isIifDQ==" crossorigin="anonymous" />	
	<link rel="stylesheet" href="/blog/style.css" />
	<style>
		.markdown-body {
			box-sizing: border-box;
			min-width: 200px;
			max-width: 980px;
			margin: 0 auto;
			padding: 45px;
		}
	
		@media (max-width: 767px) {
			.markdown-body {
				padding: 15px;
			}
		}
	</style>
</head>

<body>
	<div>
		<div class="container"><div class="side-bar"><img class="avatar" src="/assets/avatar.jpeg"/><h1>Bert Huang</h1><p>一位兴趣广泛的前端程序员</p><nav style="width:80%"><ul><li><a href="/blog/index.html">Index</a></li><li><a href="/blog/code.html">Code</a></li><li><a href="/blog/leetcode.html">LeetCode</a></li><li><a href="/blog/essay.html">Essay</a></li><li><a href="/blog/about.html">About</a></li></ul></nav><div id="social"><a href="https://github.com/Bert0324"><img class="social-avatar" src="https://github.githubassets.com/favicons/favicon.png"/></a><a href="https://www.facebook.com/people/Yuchen-Huang/100005315205237"><img class="social-avatar" src="/assets/facebook.png"/></a><a href="https://twitter.com/BertHuang5"><img class="social-avatar" src="/assets/twitter.png"/></a></div></div><div class="post-content"><div class="post-container"><div class="post-article"><article class="markdown-body">
		<div>
			<div id="toc"><div id="toc-body"><p><strong>Table of Content</strong></p><ul><li><a href="#throttle">throttle</a></li><li><a href="#debounce">debounce</a></li></ul></div></div>
			<div>
			<h1 id='throttle and debounce'>
				Throttle and Debounce
			</h1>
		
			<h2 id='throttle'>
				Throttle
			</h2>
		<p>Thinking about a scenario, there is a button which will send a http request when clicked by a user.</p>
<p>Obviously, if an impatient user clicked it for multiple times at short time, the page would send many unnecessary
requests to the backend.</p>
<p>One solution is to disable the button until the request got its response, one solution is to throttle the button, which means at certain time, it will send only one request.</p>
<p>There is a implementation.</p>
<pre><code class="language-JavaScript"><span class="hljs-keyword">const</span> throttle = <span class="hljs-function">(<span class="hljs-params">fn, delay</span>)=&gt;</span>{
    <span class="hljs-keyword">let</span> avaliable = <span class="hljs-literal">true</span>;                <span class="hljs-comment">//closure to save the timeout task handler</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (!avaliable) <span class="hljs-keyword">return</span>;
        avaliable = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>{
            fn.apply(<span class="hljs-built_in">this</span>, args);
            avaliable = <span class="hljs-literal">true</span>;
        }, delay);
    }
};

<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&#x27;button&#x27;</span>)[<span class="hljs-number">0</span>].addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, throttle(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
    <span class="hljs-built_in">console</span>.log(e);
}, <span class="hljs-number">2000</span>));
</code></pre>

			<h2 id='debounce'>
				Debounce
			</h2>
		<p>Unlike throttle, debounce is to cancel last uncompleted task.</p>
<p>If there is a page which will auto save something after the user make an update, we can debounce the save until
no more updates for a set period of time. That way we don&#39;t spam the save function.</p>
<pre><code class="language-JavaScript"><span class="hljs-keyword">const</span> debounce = <span class="hljs-function">(<span class="hljs-params">fn, delay</span>)=&gt;</span>{
    <span class="hljs-keyword">let</span> task = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>)=&gt;</span>{
        <span class="hljs-built_in">clearTimeout</span>(task);
        task = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>{
            fn.apply(<span class="hljs-built_in">this</span>, args);
        }, delay);
    }
};

<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&#x27;button&#x27;</span>)[<span class="hljs-number">0</span>].addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, debounce(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
    <span class="hljs-built_in">console</span>.log(e);
}, <span class="hljs-number">2000</span>));
</code></pre>
</div>
		</div>
	</article></div></div></div></div>
	</div>
</body>

<script>
	const body = document.getElementsByClassName('markdown-body')[0];
	const initComments = () => {
		if (!['/blog/leetcode.html', '/blog/index.html', '/blog/about.html'].includes(window.location.pathname)) {
			const root = document.createElement('div');
			root.id = 'fb-root';
			root.className = 'post-comments';
			const comments = document.createElement('div');
			comments.className = 'fb-comments';
			comments['data-href'] = window.location.href;
			comments['data-numposts'] = '5';
			root.appendChild(comments);
			body.appendChild(root);
		}
	};
	const changeComments = () => {
		const title = body.getElementsByTagName('h1')[0];
		if (title) {
			document.title = title.innerText;
		}
	};
	if (body) {
		changeComments();
		initComments();
	}
</script>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v9.0" nonce="BSCiWiHI"></script>

</html>