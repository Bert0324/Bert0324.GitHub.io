<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Bert's Blog</title><meta name="keywords" content="blog,javascript,typescript,code,frontend"><meta name="description" content="bert huang's blog"><link rel="icon" href="/assets/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg==" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/a11y-light.min.css" integrity="sha512-PW96n2amVglidqEDLPUdjJ0zByhT20poSqWJYZRutR6CP2QH58k96WmorqNnC4QXnosNeqMJM8FR/93isIifDQ==" crossorigin="anonymous"><link rel="stylesheet" href="/blog/style.css"></head><body><div><div class="container"><div class="side-bar"><img class="avatar" src="/assets/avatar.jpeg"><h1>Bert Huang</h1><p>一位兴趣广泛的前端程序员</p><nav><ul><li><a href="/blog/index.html">Index</a></li><li><a href="/blog/code.html">Code</a></li><li><a href="/blog/leetcode.html">LeetCode</a></li><li><a href="/blog/essay.html">Essay</a></li><li><a href="/blog/about.html">About</a></li></ul></nav><div id="social"><a href="https://github.com/Bert0324"><img class="social-avatar" src="https://github.githubassets.com/favicons/favicon.png"></a><a href="https://www.facebook.com/people/Yuchen-Huang/100005315205237"><img class="social-avatar" src="/assets/facebook.png"></a><a href="https://twitter.com/BertHuang5"><img class="social-avatar" src="/assets/twitter.png"></a></div><div class="views-count"><p id="busuanzi_container_site_uv" style="display:inline">total viewers: <span id="busuanzi_value_site_uv"></span></p></div></div><div class="post-content"><div class="search-field"><input class="search-input" placeholder="search"><div style="position:absolute"><div class="search-dropdown"><div class="dropdown-container"></div></div></div><button class="icon-font search-button"></button></div><div class="post-container"><div id="particles-js" style="position:fixed;height:100vh;width:100vw;z-index:-99"></div><div class="post-article"><article class="markdown-body"><div><div id="toc"><div class="last-edit"><p>Last Commit: 2021-09-26 21:10:16</p><p id="busuanzi_container_page_pv">views: <span id="busuanzi_value_page_pv"></span></p></div><div id="toc-body"><p><strong>Table of Content</strong></p><ul><li><a href="#frame">frame</a></li><ul><li><a href="#flags%20field">flags field</a></li></ul><li><a href="#connection%20establishment">connection establishment</a></li><li><a href="#connection%20termination">connection termination</a></li><li><a href="#captured%20tcp%20package%20by%20wireshark">captured tcp package by wireshark</a></li><li><a href="#reference">reference</a></li></ul></div></div><div><h1 id="tcp/ip">TCP/IP</h1><p>TCP/IP protocol can provide a reliable link between two computers, if packet get lost, it is re-transmitted. TCP itself rides on top of IP, which provides unified addressing to communicate between computers. TCP/IP is a basis for internet and 99% of other networks.</p><h2 id="frame">Frame</h2><img src="https://raw.githubusercontent.com/Bert0324/code-playground/master/assets/tcp_frame.png" width="400"><h3 id="flags%20field">Flags Field</h3><ul><li>URG—Indicates that some urgent data has been placed.</li><li>ACK—Indicates that acknowledgement number is valid.</li><li>PSH—Indicates that data should be passed to the application as soon as possible.</li><li>RST—Resets the connection.</li><li>SYN—Synchronizes sequence numbers to initiate a connection.</li><li>FIN—Means that the sender of the flag has finished sending data.</li></ul><h2 id="connection%20establishment">Connection Establishment</h2><p>The setup steps make sure both of them can receive and send data to each other.</p><ol><li><p>the client send a SYN to the server. In this step, the server knows it can receive data from the client.</p></li><li><p>the server replies with a SYN-ACK. In this step, the client knows it can receive data and send data to the server.</p></li><li><p>the client sends an ACK back to the server. In this step, the server knows the client can receive data it sent.</p></li></ol><h2 id="connection%20termination">Connection Termination</h2><p>The termination uses a four-way handshake, with each side of the connection terminating independently.</p><p>Each side needs to send a FIN and ACK packet to another side. Therefore, a typical tear-down requires a pair of FIN and ACK segments from each TCP endpoint.</p><p>There is a picture to show it:</p><img src="https://raw.githubusercontent.com/Bert0324/code-playground/master/assets/tcp_teardown.png" width="400"><p>Why the initiator needs to wait for 2 maximum segment lifetime?</p><p>If the receiver doesn&#39;t get its ACK packet from the initiator, it will resend a FIN to the initiator. It can guarantee the connection can be teardown safely.</p><h2 id="captured%20tcp%20package%20by%20wireshark">Captured TCP package by Wireshark</h2><p>As Http is over TCP, we can send a Http request and see its packages.</p><p>I typed an url in the browser and pressing enter. After the page was loaded, I closed the page. The Wireshark result is as below:</p><img src="https://raw.githubusercontent.com/Bert0324/code-playground/master/assets/tcp_wiresharks.png" width="600"><h2 id="reference">Reference</h2><ul><li><a href="https://topic.alibabacloud.com/a/tcp-three-time-font-colorredhandshakefont-and-four-times-wave-break_8_8_20230829.html">https://topic.alibabacloud.com/a/tcp-three-time-font-colorredhandshakefont-and-four-times-wave-break_8_8_20230829.html</a></li><li><a href="https://www.vskills.in/certification/tutorial/information-technology/basic-network-support-professional/tcp-connection-establish-and-terminate/">https://www.vskills.in/certification/tutorial/information-technology/basic-network-support-professional/tcp-connection-establish-and-terminate/</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages">https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages</a></li><li><a href="https://www.techrepublic.com/article/exploring-the-anatomy-of-a-data-packet/">https://www.techrepublic.com/article/exploring-the-anatomy-of-a-data-packet/</a></li></ul></div></div></article></div></div><div id="reminder" style="display:none">Facebook Comments Service is unavailable</div></div></div></div></body><script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script><script async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v9.0" nonce="BSCiWiHI"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0SEZ9KRGY7"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script async src="https://cdnjs.cloudflare.com/ajax/libs/FlexSearch/0.6.22/flexsearch.min.js"></script><script src="/blog/index.js"></script></html>