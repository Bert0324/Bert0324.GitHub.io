<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Bert's Blog</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg==" crossorigin="anonymous" />
	<link rel="stylesheet/less" type="text/css" href="/blog/style.less" />
	<script src="//cdn.jsdelivr.net/npm/less@3.13" ></script>
	<style>
		.markdown-body {
			box-sizing: border-box;
			min-width: 200px;
			max-width: 980px;
			margin: 0 auto;
			padding: 45px;
		}
	
		@media (max-width: 767px) {
			.markdown-body {
				padding: 15px;
			}
		}
	</style>
</head>

<body>
	<div><div><article class="markdown-body"><h1 id="dom-event-proxy">DOM Event Proxy</h1>
<p>If there is a list including lots of lines, and every line has different events. In this situation, if we bind an event to every lines, it will cost a large number of memory. So, normally, using event proxy to do it. </p>
<p>For the HTML like below:</p>
<pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></code></pre><p>use event proxy:</p>
<pre><code class="hljs JavaScript"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;list&#x27;</span>).addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>{
    <span class="hljs-keyword">if</span> (e.target.nodeName.toLocaleLowerCase() === <span class="hljs-string">&#x27;li&#x27;</span>){
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;the content is: &#x27;</span>, e.target.innerHTML);
    }
})</code></pre><p>In order to distinguish the element, we can use innerHTML or other things that is distinct for child elements. Except that, if the parent element has its own event, to avoid emit multiple events, we need to use <code>e.stopPropagation()</code> to stop event bubbling or trapping. </p>
<p>In React, its events will be bind to <code>document</code>  object, which is the enter of all events. The DOM events will first from the top parent child propagates to the target element, after that from the target element propagates back to the top parent element. In React, it will trigger the event when the event is bubbling back to the <code>document</code>. The SyntheticEvent has the same API in W3C standard, so<code> e.preventDefault()</code> or other event functions can be used.</p>
</article></div></div>
</body>

</html>